!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="js/",t(t.s=0)}([function(e,n,t){"use strict";function r(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}t.r(n);var i=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,t,i;return n=e,(t=[{key:"render",value:function(){var e=document.getElementById("header"),n=document.getElementById("footer");e.innerHTML="<a href=\"#\" class='home-page'>MovieSearch</a>",n.innerHTML='\n    <div class="container">\n      <div class="footer-content">\n        <a href="https://www.imdb.com/search/title/?count=100&groups=top_1000&sort=user_rating">IMDb "Top 1000"</a>\n        <a href="https://www.rottentomatoes.com/top/bestofrt/">Best of Rotten Tomatoes</a>\n      </div>\n   </div>'}}])&&r(n.prototype,t),i&&r(n,i),e}();function o(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,t,r;return n=e,(t=[{key:"render",value:function(){document.getElementById("search").innerHTML='\n     <div id=\'search\'>\n     <nav class="navbar navbar-expand-sm navbar-dark bg-dark">\n       <div class="navbar-collapse" id="navbarColor02">\n         <form class="form-inline" id = \'searchForm\'>\n           <input class="form-control" id = \'searchText\' type="text" placeholder="Search movie" autocomplete="off" autofocus>\n           <div class="lds-ring" id=\'preloader\'><img src="./js/ajax-loader.gif" alt=""></div>\n           <button class="clear-btn" type="button" onclick="document.getElementById(\'searchText\').value=\'\'"></button>\n           <button class="btn btn-secondary my-2" type="submit">Search</button>\n         </form>\n       </div>\n     </nav>\n    </div>'}},{key:"request",value:function(){var e=document.getElementById("searchForm"),n=document.getElementById("searchText");e.addEventListener("submit",(function(e){e.preventDefault(),""!=n.value&&isNaN(n.value)&&v.renderPage(n.value,1)}))}}])&&o(n.prototype,t),r&&o(n,r),e}();function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){s(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function u(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e)}var n,t,r;return n=e,r=[{key:"translate",value:function(e){return fetch("https://translate.yandex.net/api/v1.5/tr.json/translate?key=".concat("trnsl.1.1.20200508T114229Z.a17f916eb7b10e01.f0c16f20280fc1bd1fe94c3ddbf5d34984a82b61","&text=").concat(e,"&lang=ru-en&format=text")).then((function(e){return e.json()})).then((function(e){return sessionStorage.setItem("NameFilm",e.text[0]),e.text[0].split(" ").join("_")}))}},{key:"searchMovies",value:function(e,n){return document.getElementById("preloader").style.display="inline-block",fetch("https://www.omdbapi.com/?apikey=10cd503f++&type=movie&s="+e+"&page=".concat(n)).then((function(e){return e.json()})).then((function(e){return e.Search}))}},{key:"addDetails",value:function(n){return Promise.all(n.map((function(n){return e.fetchDetails(n).then((function(e){return l(l({},n),{},{details:e})}))})))}},{key:"fetchDetails",value:function(e){return fetch("https://www.omdbapi.com/?apikey=10cd503f++&type=movie&i="+e.imdbID).then((function(e){return e.json()}))}},{key:"errorLink",value:function(e){return"N/A"==e.Poster&&(e.Poster=""),e}},{key:"renderSlider",value:function(n){var t=n.map((function(n){return e.renderMovie(n)})),r='    \n  <div class="swiper-container">\n  <div class="swiper-wrapper">\n     '.concat(t.join(""),'\n  </div>\n\n  <div class="swiper-button-next"></div>\n  <div class="swiper-button-prev"></div>\n</div>');document.getElementById("content").innerHTML=r,document.getElementById("preloader").style.display="none"}},{key:"mark",value:function(e){document.getElementById("search-result").innerHTML='Showing results for "'.concat(sessionStorage.getItem("NameFilm"),'"')}},{key:"renderMovie",value:function(e){return'\n  <div class=\'swiper-slide\'>\n  <div class="slider-item-link"><a href="https://www.imdb.com/title/'.concat(e.imdbID,'/videogallery/">').concat(e.Title,'</a></div>\n  <img class="slider-item-poster" src="').concat(e.Poster,'" alt="No poster">\n  <a class =\'btn-info\' onclick="openInfoFilm(\'').concat(e.imdbID,'\')">Details</a>\n  <div class="slider-item-age">Year:').concat(e.Year,'</div>\n  <div class="slider-item-rating" data = \'').concat(e.imdbID,"'>\n      Rating:").concat(e.details.imdbRating,"\n  </div>     \n</div>\n  ")}},{key:"addSlidesInSlider",value:function(n){return document.getElementById("preloader").style.display="none",n.map((function(n){return e.renderMovie(n)}))}},{key:"settingsSlider",value:function(){var n=2,t=new Swiper(".swiper-container",{initialSlide:1,breakpoints:{320:{initialSlide:0,centeredSlides:!0,slidesPerView:1,spaceBetween:30},720:{initialSlide:0,centeredSlides:!0,slidesPerView:2,spaceBetween:50},1024:{initialSlide:1,centeredSlides:!0,slidesPerView:3,spaceBetween:30},1280:{initialSlide:1,centeredSlides:!0,slidesPerView:4,spaceBetween:20}},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});t.on("slideChange",(function(){t.activeIndex>t.slides.length-2&&(e.searchMovies(sessionStorage.getItem("NameFilm"),n).then((function(n){return e.addDetails(n)})).then((function(n){return n.map((function(n){return e.errorLink(n)}))})).then((function(n){return e.addSlidesInSlider(n)})).then((function(e){return t.appendSlide(e)})).catch((function(e){document.getElementById("search-result").innerHTML='Showing all films for: "'.concat(sessionStorage.getItem("NameFilm"),'"'),document.getElementById("preloader").style.display="none"})),n++)}))}}],(t=[{key:"renderPage",value:function(n,t){e.translate(n).then((function(n){return e.searchMovies(n,t)})).then((function(n){return e.addDetails(n)})).then((function(n){return n.map((function(n){return e.errorLink(n)}))})).then((function(n){return e.renderSlider(n)})).then((function(n){return e.mark(sessionStorage.getItem("NameFilm"))})).then((function(n){return e.settingsSlider()})).catch((function(e){document.getElementById("search-result").innerHTML='No results were found for "'.concat(n,'"'),document.getElementById("preloader").style.display="none"}))}}])&&u(n.prototype,t),r&&u(n,r),e}(),f=new i,p=new a,m=new d;f.render(),p.render(),p.request(),m.renderPage("home",1),document.querySelector(".home-page").onclick=function(){m.renderPage("home",1)};var v=n.default=m}]);